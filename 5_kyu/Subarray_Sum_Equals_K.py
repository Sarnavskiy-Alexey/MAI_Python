"""
    Взамен задачи https://www.codewars.com//kata/5a5c5a1ab3bfa8728d00008d
    Reference: https://leetcode.com/problems/subarray-sum-equals-k/description/
"""


class Solution:
    def subarraySum(self, nums: list, k: int) -> int:
        if len(nums) == 1:
            return 1 if nums[0] == k else 0
        
        d = { 0 : 1 }
        prefix_sum = 0
        counter = 0
        
        for el in nums:
            prefix_sum += el
            if prefix_sum - k in d:
                counter += d[prefix_sum - k]
            if prefix_sum in d:
                d[prefix_sum] += 1
            else:
                d[prefix_sum] = 1
        
        return counter


def launch_test(nums: list, k: int, answer: int):
    print(Solution().subarraySum(nums, k), '==', answer)


if __name__ == '__main__':
    launch_test([1, 1, 1], 2, 2)
    launch_test([1, 2, 3], 3, 2)
    launch_test([1], 0, 0)
    launch_test([-1, -1, 1], 0, 1)
    launch_test([1, -1, 0], 0, 3)
    launch_test([97,-351,-258,829,-925,-45,-479,-414,400,-352,857,899,-230,-635,331,-425,-674,144,-643,-756,-752,749,-993,438,-902,-702,824,-966,-436,271,-517,-993,379,-711,924,527,-921,-884,-801,-47,-429,598,917,356,-423,177,805,-315,-588,299,-116,-568,-358,-270,523,-903,-85,238,205,862,-887,-105,-155,340,336,770,-426,-971,936,-151,819,-870,547,74,-234,-764,-640,-255,560,-210,-128,-838,211,409,501,45,-580,799,602,-282,939,-263,643,-413,453,-210,848,947,-223,595,21,959,204,-859,-390,989,808,-518,-863,-682,-772,-71,579,-736,-265,-172,-689,-25,-78,229,670,-384,-18,312,-751,906,141,-497,360,867,-425,500,415,995,-903,70,995,530,82,-962,-930,515,-271,-338,-685,924,-607,-519,49,-186,-870,-566,665,-716,187,-422,-981,-98,722,-154,-18,-504,-491,96,-644,185,-924,954,-684,881,-89,267,504,500,767,-973,27,684,-419,858,778,-48,549,460,-806,-343,-265,-699,-676,-184,-891,943,-398,653,965,521,-71,201,-251,-837,-318,200,-115,556,-437,504,-855,191,438,491,-954,-493,-701,-676,-375,-426,667,867,-786,-964,-277,74,995,-271,785,490,-558,-32,987,894,-459,477,-394,-265,-365,-629,229,565,-895,867,-973,-153,-62,6,454,-13,-127,808,-772,302,-325,-213,-427,332,-776,-219,-821,-541,-658,-340,-124,-877,-52,-817,555,-816,602,951,180,4,-147,-865,987,-613,357,-395,780,-352,-226,487,818,872,509,-187,866,486,285,-503,-691,-284,-468,765,450,706,837,632,526,-949,-257,-584,-730,-387,3,-373,-97,-683,-235,-762,551,-812,-761,-317,862,-57,-394,-865,-283,245,-44,956,-495,-527,-331,-1000,-314,-262,593,63,-107,-975,840,190,251,-6,43,-181,679,-925,-425,-320,-936,-849,-295,-692,136,59,319,467,906,-677,-128,273,-230,-963,705,-642,-670,685,-378,-973,-257,558,-507,164,-867,-956,198,-248,-870,702,-86,785,639,933,891,-672,865,513,866,995,55,-725,-110,-514,168,492,-323,131,-499,-978,443,844,-65,-274,-520,-814,-81,733,-637,-220,969,-755,-449,564,354,525,-255,-266,-48,419,-56,335,970,-423,-468,-721,-153,190,-128,466,880,784,833,-250,51,-148,-91,-495,-833,-985,964,-120,-529,500,131,756,558,-418,62,-472,-509,955,11,-215,409,219,-84,393,747,11,-618,-259,306,151,198,-459,-296,639,440,677,950,-247,726,515,226,-59,456,-510,984,452,679,-967,-810,-921,81,333,122,517,337,-703,-25,-52,971,-692,539,856,-318,658,654,-651,880,780,880,-432,909,392,591,492,-514,-745,-602,828,481,100,62,814,-74,-574,129,-583,-529,-602,-546,-858,-51,-8,-339,-339,510,-652,325,477,-599,473,855,-177,-626,170,-698,95,-428,786,-952,49,236,-312,-945,864,-713,-413,199,-617,339,975,-648,-826,891,-909,-555,944,198,92,687,928,-286,486,-98,-943,944,143,-732,45,-883,-507,-916,97,-82,-513,945,-669,55,-909,-749,895,-852,-456,853,872,-191,-164,258,315,257,-600,707,-801,150,-956,-738,-930,179,908,-465,-467,-617,224,528,-37,-357,-285,995,-875,46,431,822,829,-283,189,-459,-109,-1,-569,661,480,645,-344,900,624,952,113,757,-135,818,808,183,-361,971,-519,-858,718,907,972,-9,463,889,-815,-94,337,114,639,50,-8,-458,-338,-708,-321,726,-175,831,-178,-558,36,-487,-347,-908,-75,565,-599,294,-808,534,-629,-500,-161,453,109,-893,-217,530,797,591,682,-212,-693,334,-622,-253,728,-305,-395,2,186,450,878,512,229,862,-939,897,777,907,-631,71,51,-250,-746,-340,217,-990,-749,-203,-530,749,245,-14,-134,937,-529,-308,468,-953,-899,-736,-641,-373,604,474,709,-590,-883,836,135,716,-653,809,432,-545,-486,-834,-103,-38,171,-707,-188,-122,339,-750,833,-890,-583,615,-429,394,533,930,459,320,-103,-666,782,-263,997,-574,382,624,904,-824,812,317,-134,301,884,890,-815,926,793,830,262,-590,918,118,-425,-773,-61,52,542,353,-520,848,-418,-855,81,418,-776,46,970,550,789,-262,-742,617,-262,-194,306,189,114,78,845,472,385,509,352,978,-354,478,-62,9,-825,509,-663,-599,375,-872,794,656,898,-683,170,-719,-698,495,-354,917,-314,-768,89,612,-930,-896,174,334,106,-917,268,935,-485,-25,603,-595,-253,268,724,-92,-953,219,52,-523,-778,719,419,-801,-160,-411,-823,-94,699,107,-594,495,-399,-116,685,-832,996,707,-96,-462,433,-689,382,-239,-837,968,-123,-695,-59,-549,800,460,114,264,205,65,-632,-725,681,-385,-605,469,-745,-561,407,-4,-88,232,-983,85,-495,340,671,761,-750,-536,-977,-165,-713,757,574,-570,986,-331,42,595,452,845,-254,-634,-516,738,-621,-94,356,343,-696,552,-214,258,357,-273,-33,-970,-933,-64,158,-509,-471,239,760,85,-28,353,128,777,-679,565,428,465,-675,738,575,560,-136,-459,461,765,-862,-961,-508,9,277,195,-91,324,456,196,-442,357,-877,829,-678,-592,-862,-646,625,540,470,-746,486,-701,509,-43,-196,-116,-187,450,-389,-972,-588,-825,399,-816,-992,13,-3,-809,729,-252,594,897,141], -291, 19)
